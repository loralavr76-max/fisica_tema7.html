<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>F√≠sica 3¬∫ ESO ¬∑ Tema 7 ¬∑ Las fuerzas y el movimiento</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg-main: #05081a;
      --bg-card: #101634;
      --bg-card-soft: #141b3c;
      --accent: #3aa9ff;
      --accent-soft: rgba(58,169,255,0.18);
      --accent-strong: #57d6ff;
      --text-main: #f3f6ff;
      --text-soft: #c0c6e6;
      --danger: #ff5c7a;
      --success: #38e38b;
      --chip-bg: rgba(255,255,255,0.06);
      --border-subtle: rgba(255,255,255,0.08);
      --radius-lg: 18px;
      --radius-pill: 999px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background:
        radial-gradient(circle at top left, #233d80 0, #05081a 55%, #02030a 100%);
      color: var(--text-main);
      display: flex;
      justify-content: center;
      align-items: stretch;
      padding: 12px;
      overflow-x: hidden;
    }

    .app {
      width: 100%;
      max-width: 1280px;
      background: radial-gradient(circle at top, #17234a 0, #060816 60%);
      border-radius: 26px;
      border: 1px solid rgba(255,255,255,0.08);
      box-shadow:
        0 30px 80px rgba(0,0,0,0.7),
        0 0 0 1px rgba(255,255,255,0.03) inset;
      padding: 20px 22px 18px;
      display: flex;
      flex-direction: column;
      gap: 18px;
      position: relative;
      overflow: hidden;
    }

    .app::before {
      content: "";
      position: absolute;
      inset: 0;
      background:
        radial-gradient(circle at top right, rgba(90,200,255,0.14) 0, transparent 50%),
        radial-gradient(circle at bottom left, rgba(80,120,255,0.18) 0, transparent 55%);
      mix-blend-mode: screen;
      pointer-events: none;
      opacity: 0.9;
    }

    header {
      position: relative;
      z-index: 1;
      display: flex;
      gap: 18px;
      align-items: center;
      justify-content: space-between;
    }

    .title-block h1 {
      font-size: 22px;
      letter-spacing: 0.02em;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .title-pill {
      font-size: 11px;
      padding: 3px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.2);
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--accent-strong);
      background: rgba(0,0,0,0.3);
    }

    .subtitle {
      margin-top: 6px;
      font-size: 13px;
      color: var(--text-soft);
    }

    .mode-switch {
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .mode-badge {
      font-size: 11px;
      padding: 3px 10px;
      border-radius: 999px;
      background: rgba(0,0,0,0.45);
      border: 1px solid rgba(255,255,255,0.2);
      display: inline-flex;
      align-items: center;
      gap: 6px;
      color: var(--accent-strong);
    }

    .mode-tabs {
      display: inline-flex;
      background: rgba(2,4,20,0.9);
      border-radius: 999px;
      padding: 3px;
      border: 1px solid rgba(255,255,255,0.1);
    }

    .mode-tab {
      border-radius: 999px;
      padding: 4px 10px;
      font-size: 11px;
      cursor: pointer;
      color: var(--text-soft);
      border: none;
      background: transparent;
      white-space: nowrap;
    }

    .mode-tab.active {
      background: linear-gradient(120deg, var(--accent), var(--accent-strong));
      color: #02030a;
      font-weight: 600;
      box-shadow: 0 0 18px rgba(87,214,255,0.6);
    }

    .search-row {
      position: relative;
      z-index: 1;
      display: flex;
      gap: 12px;
      align-items: center;
      justify-content: space-between;
      margin-top: 4px;
    }

    .search-wrapper {
      flex: 1;
      position: relative;
    }

    .search-wrapper input {
      width: 100%;
      padding: 8px 12px 8px 28px;
      border-radius: 999px;
      border: 1px solid var(--border-subtle);
      background: rgba(3,6,24,0.92);
      color: var(--text-main);
      font-size: 13px;
      outline: none;
    }

    .search-wrapper input::placeholder {
      color: rgba(200,205,240,0.6);
    }

    .search-icon {
      position: absolute;
      left: 10px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 12px;
      opacity: 0.7;
    }

    .toggle-translate {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      border-radius: 999px;
      padding: 7px 11px;
      border: 1px solid rgba(255,255,255,0.16);
      background: rgba(8,10,35,0.9);
      font-size: 11px;
      color: var(--text-soft);
    }

    .toggle-dot {
      width: 18px;
      height: 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.25);
      position: relative;
      background: rgba(255,255,255,0.06);
    }

    .toggle-dot::after {
      content: "";
      position: absolute;
      top: 1px;
      left: 1px;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: rgba(255,255,255,0.8);
      transition: transform 0.18s ease;
    }

    .toggle-translate.on .toggle-dot::after {
      transform: translateX(8px);
      background: var(--accent-strong);
    }

    main {
      position: relative;
      z-index: 1;
      display: grid;
      grid-template-columns: minmax(0, 2.1fr) minmax(0, 1.5fr);
      gap: 16px;
      margin-top: 6px;
      height: 540px;
    }

    .content-area {
      background: rgba(5,9,30,0.9);
      border-radius: 22px;
      padding: 14px 14px 12px;
      border: 1px solid rgba(255,255,255,0.09);
      display: flex;
      flex-direction: column;
      gap: 10px;
      overflow: hidden;
    }

    .right-panel {
      background: rgba(5,9,30,0.95);
      border-radius: 22px;
      padding: 14px 14px 12px;
      border: 1px solid rgba(255,255,255,0.09);
      display: flex;
      flex-direction: column;
      gap: 12px;
      overflow: hidden;
    }

    .cards-scroll {
      flex: 1;
      overflow-y: auto;
      padding-right: 4px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .cards-scroll::-webkit-scrollbar,
    .right-panel::-webkit-scrollbar {
      width: 6px;
    }

    .cards-scroll::-webkit-scrollbar-thumb,
    .right-panel::-webkit-scrollbar-thumb {
      background: rgba(255,255,255,0.18);
      border-radius: 999px;
    }

    .theory-card {
      background: radial-gradient(circle at top left, rgba(90,170,255,0.22) 0, transparent 55%),
                  var(--bg-card);
      border-radius: var(--radius-lg);
      padding: 10px 11px 9px;
      border: 1px solid rgba(255,255,255,0.12);
      box-shadow: 0 10px 26px rgba(0,0,0,0.6);
    }

    .theory-card:nth-child(odd) {
      background:
        radial-gradient(circle at top right, rgba(80,220,255,0.25) 0, transparent 55%),
        var(--bg-card-soft);
    }

    .theory-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 4px;
      gap: 8px;
    }

    .theory-title {
      font-size: 14px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .icon-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: var(--accent-strong);
      box-shadow: 0 0 10px rgba(87,214,255,0.9);
    }

    .theory-ref {
      font-size: 11px;
      color: rgba(210,220,255,0.8);
      opacity: 0.9;
    }

    .theory-text {
      font-size: 13px;
      color: var(--text-soft);
      line-height: 1.38;
    }

    .translation {
      margin-top: 5px;
      padding-top: 5px;
      border-top: 1px dashed rgba(255,255,255,0.18);
      font-size: 13px;
      color: #e9f0ff;
      line-height: 1.36;
    }

    .chip-row {
      margin-top: 7px;
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
    }

    .chip {
      font-size: 11px;
      padding: 3px 9px;
      border-radius: 999px;
      background: var(--chip-bg);
      border: 1px solid rgba(255,255,255,0.16);
      cursor: pointer;
      color: var(--text-soft);
      transition: background 0.15s ease, transform 0.12s ease, border-color 0.15s;
    }

    .chip:hover {
      background: rgba(80,180,255,0.25);
      border-color: rgba(130,210,255,0.9);
      transform: translateY(-1px);
    }

    .chip.active {
      background: linear-gradient(120deg, var(--accent), var(--accent-strong));
      color: #02030a;
      border-color: transparent;
      font-weight: 600;
    }

    .panel-card {
      background: var(--bg-card);
      border-radius: var(--radius-lg);
      padding: 10px 11px 9px;
      border: 1px solid rgba(255,255,255,0.11);
    }

    .panel-title {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .panel-title .icon {
      font-size: 12px;
    }

    .mini-text {
      font-size: 12px;
      color: var(--text-soft);
      margin-bottom: 7px;
    }

    .panel-divider {
      height: 1px;
      background: linear-gradient(90deg,
        transparent,
        rgba(255,255,255,0.45),
        transparent);
      opacity: 0.35;
      margin: 5px 0 7px;
    }

    .tests-main {
      font-size: 13px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .test-question {
      font-weight: 600;
      color: #f6f1ff;
    }

    .test-options {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .test-option {
      border-radius: 999px;
      padding: 6px 9px;
      font-size: 13px;
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(5,9,30,0.9);
      cursor: pointer;
      text-align: left;
      color: var(--text-main);
      transition: background 0.15s ease, transform 0.1s ease, border-color 0.15s;
    }

    .test-option:hover:not(.correct):not(.wrong) {
      background: rgba(80,150,255,0.32);
      transform: translateY(-1px);
    }

    .test-option.correct {
      background: rgba(56,227,139,0.18);
      border-color: var(--success);
    }

    .test-option.wrong {
      background: rgba(255,92,122,0.18);
      border-color: var(--danger);
    }

    .test-feedback {
      font-size: 12px;
      min-height: 16px;
    }

    .test-feedback.ok {
      color: var(--success);
    }

    .test-feedback.bad {
      color: var(--danger);
    }

    .progress-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin-top: 3px;
    }

    .progress-bar-wrap {
      flex: 1;
      height: 7px;
      border-radius: 999px;
      background: rgba(255,255,255,0.06);
      overflow: hidden;
    }

    .progress-bar {
      height: 100%;
      width: 0%;
      border-radius: 999px;
      background: linear-gradient(90deg, var(--accent), var(--accent-strong));
      box-shadow: 0 0 12px rgba(87,214,255,0.9);
      transition: width 0.25s ease;
    }

    .progress-label {
      width: 90px;
      text-align: right;
      font-size: 11px;
      color: var(--text-soft);
    }

    .session-info {
      font-size: 12px;
      color: var(--text-soft);
      margin-top: 4px;
    }

    .session-info strong {
      color: var(--accent-strong);
    }

    .vocab-main {
      font-size: 13px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .vocab-word {
      font-size: 18px;
      font-weight: 600;
      letter-spacing: 0.03em;
    }

    .small-pill {
      display: inline-block;
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      padding: 2px 7px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.2);
      color: rgba(210,220,255,0.85);
      margin-bottom: 3px;
    }

    .vocab-answer {
      width: 100%;
      padding: 7px 9px;
      border-radius: 999px;
      border: 1px solid var(--border-subtle);
      background: rgba(3,6,24,0.92);
      color: var(--text-main);
      font-size: 13px;
      outline: none;
      margin-top: 3px;
    }

    .btn-row {
      margin-top: 6px;
      display: flex;
      gap: 6px;
    }

    .btn {
      border-radius: 999px;
      padding: 6px 10px;
      font-size: 12px;
      border: 1px solid rgba(255,255,255,0.2);
      background: rgba(6,9,30,0.95);
      color: var(--text-main);
      cursor: pointer;
    }

    .btn-primary {
      background: linear-gradient(120deg, var(--accent), var(--accent-strong));
      border-color: transparent;
      color: #02030a;
      font-weight: 600;
      box-shadow: 0 0 16px rgba(87,214,255,0.8);
    }

    .btn-secondary {
      background: rgba(255,255,255,0.05);
    }

    .vocab-feedback {
      font-size: 12px;
      min-height: 16px;
      margin-top: 4px;
    }

    .vocab-meta {
      margin-top: 3px;
      font-size: 11px;
      color: var(--text-soft);
    }

    @media (max-width: 960px) {
      main {
        grid-template-columns: 1fr;
        height: auto;
      }
      .app {
        padding: 14px;
      }
      .right-panel, .content-area {
        height: auto;
        max-height: 480px;
      }
    }

    @media (max-width: 700px) {
      header {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
      }
      .search-row {
        flex-direction: column;
        align-items: stretch;
      }
      main {
        gap: 12px;
      }
    }
  </style>
</head>
<body>
<div class="app">
  <header>
    <div class="title-block">
      <h1>
        <span class="title-pill">F√≠sica ¬∑ 3¬∫ ESO</span>
        Tema 7: ¬øPor qu√© se mueven los cuerpos?
      </h1>
      <div class="subtitle">
        Newton, fuerza, rozamiento y aceleraci√≥n ‚Äî –≤—Å—ë –≤ –æ–¥–Ω–æ–π —Ç–µ–º–µ, —Å –ø–µ—Ä–µ–≤–æ–¥–æ–º –Ω–∞ —Ä—É—Å—Å–∫–∏–π.
      </div>
    </div>
    <div class="mode-switch">
      <div class="mode-badge">
        üë®‚Äçüë©‚Äçüë¶ Modo families
        <div class="mode-tabs">
          <button class="mode-tab active" data-mode="theory">Teor√≠a</button>
          <button class="mode-tab" data-mode="tests">Tests</button>
          <button class="mode-tab" data-mode="vocab">Vocabulario</button>
        </div>
      </div>
    </div>
  </header>

  <div class="search-row">
    <div class="search-wrapper">
      <span class="search-icon">üîç</span>
      <input id="searchInput" type="text" placeholder="Buscar en el texto / –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–º–µ‚Ä¶" />
    </div>
    <button id="toggleTranslate" class="toggle-translate on">
      <div class="toggle-dot"></div>
      <span>–ü–æ–∫–∞–∑–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥ (RU)</span>
    </button>
  </div>

  <main>
    <!-- –õ–ï–í–ê–Ø –ö–û–õ–û–ù–ö–ê ¬∑ –¢–ï–û–†–ò–Ø -->
    <section class="content-area">
      <div class="cards-scroll" id="cardsContainer">
        <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ —Ç–µ–æ—Ä–∏–∏ —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è —Å–∫—Ä–∏–ø—Ç–æ–º -->
      </div>
    </section>

    <!-- –ü–†–ê–í–ê–Ø –ö–û–õ–û–ù–ö–ê ¬∑ –¢–ï–°–¢–´ + –°–õ–û–í–ê + –í–†–ï–ú–Ø -->
    <section class="right-panel">
      <!-- –ë–ª–æ–∫ —Ç–µ—Å—Ç–æ–≤ -->
      <div class="panel-card" id="testsPanel">
        <div class="panel-title">
          <span class="icon">üß™</span> Tests
        </div>
        <div class="mini-text">
          –ü—Ä–æ–≤–µ—Ä—å –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Ç–µ–º—ã. –í–æ–ø—Ä–æ—Å—ã –º–µ–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –û—Ç–≤–µ—Ç–∏–ª ‚Äî —Å—Ä–∞–∑—É –≤–∏–¥–∏—à—å –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ.
        </div>
        <div class="tests-main">
          <div id="testQuestion" class="test-question"></div>
          <div id="testOptions" class="test-options"></div>
          <div id="testFeedback" class="test-feedback"></div>
          <div class="panel-divider"></div>
          <div class="progress-row">
            <div class="progress-bar-wrap">
              <div id="progressBar" class="progress-bar"></div>
            </div>
            <div id="progressCircle" class="progress-label"></div>
          </div>
        </div>
      </div>

      <!-- –ë–ª–æ–∫ —Å–ª–æ–≤ -->
      <div class="panel-card" id="vocabPanel">
        <div class="panel-title">
          <span class="icon">üî†</span> –¢—Ä–µ–Ω–∞–∂—ë—Ä —Å–ª–æ–≤
        </div>
        <div class="mini-text">
          –ò—Å–ø–∞–Ω—Å–∫–∏–π ‚Üí —Ä—É—Å—Å–∫–∏–π. –í–≤–æ–¥–∏ –ø–µ—Ä–µ–≤–æ–¥ –∏ –∂–º–∏ ¬´–ü—Ä–æ–≤–µ—Ä–∏—Ç—å¬ª. –ú–æ–∂–Ω–æ —Ç–∞–∫–∂–µ –ø—Ä–æ—Å—Ç–æ –Ω–∞–∂–∞—Ç—å ¬´–ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç¬ª.
        </div>
        <div class="vocab-main">
          <div class="small-pill">–°–ª–æ–≤–æ –ø–æ —Ç–µ–º–µ</div>
          <div id="vocabWord" class="vocab-word">fuerza</div>
          <input id="vocabAnswer" class="vocab-answer" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–µ—Ä–µ–≤–æ–¥‚Ä¶" />
          <div class="btn-row">
            <button id="checkVocab" class="btn btn-primary">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
            <button id="showVocab" class="btn btn-secondary">–ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç</button>
            <button id="nextVocab" class="btn btn-secondary">–ù–æ–≤–æ–µ —Å–ª–æ–≤–æ</button>
          </div>
          <div id="vocabFeedback" class="vocab-feedback"></div>
          <div id="vocabMeta" class="vocab-meta"></div>
        </div>
      </div>

      <!-- –í–†–ï–ú–Ø –ó–ê–ù–Ø–¢–ò–Ø -->
      <div class="panel-card">
        <div class="panel-title">
          <span class="icon">‚è±</span> –í—Ä–µ–º—è –ø–æ —Ç–µ–º–µ
        </div>
        <div class="mini-text">
          –°—á–∏—Ç–∞–µ—Ç –≤—Ä–µ–º—è —Ç–æ–ª—å–∫–æ –Ω–∞ —ç—Ç–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ. –î–ª—è —Ä–µ–±—ë–Ω–∫–∞ ‚Äî —á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å, —Å–∫–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω–æ –∑–∞–Ω–∏–º–∞–ª—Å—è.
        </div>
        <div class="session-info">
          –°–µ–≥–æ–¥–Ω—è –ø–æ —Ç–µ–º–µ: <strong id="sessionToday">0 –º–∏–Ω</strong><br />
          –í—Å–µ–≥–æ –ø–æ —Ç–µ–º–µ: <strong id="totalMinutes">0 –º–∏–Ω</strong>
        </div>
      </div>
    </section>
  </main>
</div>

<script>
  // ===== –î–ê–ù–ù–´–ï –¢–ï–ú–´ (–¢–ï–û–†–ò–Ø) =====
  const topics = [
    {
      id: 'newton1',
      ref: '5.1 ¬∑ Primera ley de Newton',
      title: 'Primera ley de Newton o ley de la inercia',
      text_ca:
        'Un cuerpo se mantendr√° en su estado de movimiento, ya sea en reposo o a velocidad constante, si no se le obliga a cambiar por la acci√≥n de una o varias fuerzas que act√∫an sobre √©l.',
      text_ru:
        '–¢–µ–ª–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–∫–æ—è –∏–ª–∏ —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–≥–æ –ø—Ä—è–º–æ–ª–∏–Ω–µ–π–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è, –ø–æ–∫–∞ –Ω–∞ –Ω–µ–≥–æ –Ω–µ –ø–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å–∏–ª–∞, –∑–∞—Å—Ç–∞–≤–ª—è—é—â–∞—è –∏–∑–º–µ–Ω–∏—Ç—å —ç—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ. –≠—Ç–æ –∏ –µ—Å—Ç—å –∑–∞–∫–æ–Ω –∏–Ω–µ—Ä—Ü–∏–∏.',
      keywords: ['ley de la inercia', 'inercia', 'equilibrio', 'MRU']
    },
    {
      id: 'newton2',
      ref: '5.2 ¬∑ Segunda ley de Newton',
      title: 'Segunda ley de Newton o ley del movimiento',
      text_ca:
        'Si sobre un cuerpo act√∫a una fuerza neta, este adquiere una aceleraci√≥n directamente proporcional a la fuerza que act√∫a sobre √©l e inversamente proporcional a la masa: F = m ¬∑ a.',
      text_ru:
        '–ï—Å–ª–∏ –Ω–∞ —Ç–µ–ª–æ –¥–µ–π—Å—Ç–≤—É–µ—Ç —Ä–∞–≤–Ω–æ–¥–µ–π—Å—Ç–≤—É—é—â–∞—è —Å–∏–ª–∞, –æ–Ω–æ –ø–æ–ª—É—á–∞–µ—Ç —É—Å–∫–æ—Ä–µ–Ω–∏–µ, –ø—Ä—è–º–æ –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —ç—Ç–æ–π —Å–∏–ª–µ –∏ –æ–±—Ä–∞—Ç–Ω–æ –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –º–∞—Å—Å–µ: F = m ¬∑ a.',
      keywords: ['F = m ¬∑ a', 'aceleraci√≥n', 'fuerza neta', 'masa']
    },
    {
      id: 'newton3',
      ref: '5.3 ¬∑ Tercera ley de Newton',
      title: 'Tercera ley de Newton o ley de acci√≥n y reacci√≥n',
      text_ca:
        'Si un cuerpo ejerce una fuerza sobre otro, este ejerce una fuerza igual, pero en sentido contrario, sobre el primero. Ambas fuerzas forman un par acci√≥n-reacci√≥n.',
      text_ru:
        '–ï—Å–ª–∏ –æ–¥–Ω–æ —Ç–µ–ª–æ –¥–µ–π—Å—Ç–≤—É–µ—Ç –Ω–∞ –¥—Ä—É–≥–æ–µ —Å –Ω–µ–∫–æ—Ç–æ—Ä–æ–π —Å–∏–ª–æ–π, –≤—Ç–æ—Ä–æ–µ —Ç–µ–ª–æ –¥–µ–π—Å—Ç–≤—É–µ—Ç –Ω–∞ –ø–µ—Ä–≤–æ–µ —Å —Ç–∞–∫–æ–π –∂–µ –ø–æ –º–æ–¥—É–ª—é —Å–∏–ª–æ–π, –Ω–æ –≤ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏. –≠—Ç–∏ —Å–∏–ª—ã –Ω–∞–∑—ã–≤–∞—é—Ç –ø–∞—Ä–æ–π –¥–µ–π—Å—Ç–≤–∏—è –∏ –ø—Ä–æ—Ç–∏–≤–æ–¥–µ–π—Å—Ç–≤–∏—è.',
      keywords: ['acci√≥n y reacci√≥n', 'par de fuerzas', 'fuerza normal']
    },
    {
      id: 'peso',
      ref: '5 ¬∑ Fuerza de la gravedad',
      title: 'Peso: la fuerza con la que nos atrae la gravedad',
      text_ca:
        'El peso es la fuerza con la que la gravedad atrae a un cuerpo. Se calcula como P = m ¬∑ g, donde g ‚âà 9,8 m/s¬≤ en la Tierra.',
      text_ru:
        '–í–µ—Å ‚Äî —ç—Ç–æ —Å–∏–ª–∞, —Å –∫–æ—Ç–æ—Ä–æ–π –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏—è –ø—Ä–∏—Ç—è–≥–∏–≤–∞–µ—Ç —Ç–µ–ª–æ. –í—ã—á–∏—Å–ª—è–µ—Ç—Å—è –ø–æ —Ñ–æ—Ä–º—É–ª–µ P = m ¬∑ g, –≥–¥–µ g ‚âà 9,8 –º/—Å¬≤ –Ω–∞ –ó–µ–º–ª–µ.',
      keywords: ['peso', 'gravedad', 'P = m ¬∑ g']
    },
    {
      id: 'friccion',
      ref: '6 ¬∑ La fuerza de rozamiento',
      title: 'Rozamiento: fuerza que se opone al movimiento',
      text_ca:
        'La fuerza de rozamiento se opone al movimiento relativo entre dos superficies en contacto. Su direcci√≥n es siempre contraria al movimiento.',
      text_ru:
        '–°–∏–ª–∞ —Ç—Ä–µ–Ω–∏—è –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –º–µ–∂–¥—É —Å–æ–ø—Ä–∏–∫–∞—Å–∞—é—â–∏–º–∏—Å—è –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—è–º–∏ –∏ –≤—Å–µ–≥–¥–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ –¥–≤–∏–∂–µ–Ω–∏—é. –û–Ω–∞ –º–µ—à–∞–µ—Ç —Ç–µ–ª–∞–º —Å–∫–æ–ª—å–∑–∏—Ç—å –∏–ª–∏ –∫–∞—Ç–∏—Ç—å—Å—è.',
      keywords: ['rozamiento', 'fricci√≥n est√°tica', 'fricci√≥n din√°mica']
    },
    {
      id: 'coef',
      ref: '6 ¬∑ Coeficientes de rozamiento',
      title: 'Coeficiente de rozamiento Œº',
      text_ca:
        'El coeficiente de rozamiento (Œº) mide cu√°nta fricci√≥n hay entre dos materiales. Depende de la naturaleza de las superficies y no del √°rea de contacto.',
      text_ru:
        '–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Ç—Ä–µ–Ω–∏—è Œº –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –Ω–∞—Å–∫–æ–ª—å–∫–æ —Å–∏–ª—å–Ω–æ —Ç—Ä—É—Ç—Å—è –¥—Ä—É–≥ –æ –¥—Ä—É–≥–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã. –û–Ω –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–≤–æ–π—Å—Ç–≤ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–µ–π, –∞ –Ω–µ –æ—Ç –ø–ª–æ—â–∞–¥–∏ —Å–æ–ø—Ä–∏–∫–æ—Å–Ω–æ–≤–µ–Ω–∏—è.',
      keywords: ['Œº', 'coeficiente', 'materiales', 'tabla de rozamiento']
    },
    {
      id: 'aceleracion',
      ref: 'La aceleraci√≥n de los cuerpos',
      title: 'Aceleraci√≥n: cambio de velocidad con el tiempo',
      text_ca:
        'La aceleraci√≥n es la variaci√≥n de la velocidad de un cuerpo por unidad de tiempo. Cuando un objeto cae en ca√≠da libre cerca de la superficie terrestre, su aceleraci√≥n es aproximadamente constante y vale g.',
      text_ru:
        '–£—Å–∫–æ—Ä–µ–Ω–∏–µ ‚Äî —ç—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Ç–µ–ª–∞ –∑–∞ –µ–¥–∏–Ω–∏—Ü—É –≤—Ä–µ–º–µ–Ω–∏. –ü—Ä–∏ —Å–≤–æ–±–æ–¥–Ω–æ–º –ø–∞–¥–µ–Ω–∏–∏ –≤–æ–∑–ª–µ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ –ó–µ–º–ª–∏ —É—Å–∫–æ—Ä–µ–Ω–∏–µ –ø–æ—á—Ç–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –∏ —Ä–∞–≤–Ω–æ g.',
      keywords: ['aceleraci√≥n', 'ca√≠da libre', 'g']
    }
  ];

  // ===== –¢–ï–°–¢–´ =====
  const tests = [
    {
      topicId: 'newton1',
      q: '¬øQu√© describe la primera ley de Newton?',
      options: [
        'La relaci√≥n entre fuerza, masa y aceleraci√≥n.',
        'El comportamiento de un cuerpo si no act√∫an fuerzas netas sobre √©l.',
        'La fuerza con la que la Tierra atrae a los cuerpos.',
        'La aparici√≥n de la fuerza de rozamiento.'
      ],
      correct: 1,
      explain:
        'La 1¬™ ley explica que, sin fuerza neta, un cuerpo mantiene su estado de reposo o movimiento rectil√≠neo uniforme (inercia).'
    },
    {
      topicId: 'newton2',
      q: 'Seg√∫n la 2¬™ ley de Newton, si duplicamos la fuerza neta y mantenemos la masa‚Ä¶',
      options: [
        'la aceleraci√≥n tambi√©n se duplica.',
        'la aceleraci√≥n se reduce a la mitad.',
        'la aceleraci√≥n no cambia.',
        'la masa se duplica.'
      ],
      correct: 0,
      explain:
        'F = m ¬∑ a ‚áí a = F / m. Si F se duplica y m es constante, la aceleraci√≥n tambi√©n se duplica.'
    },
    {
      topicId: 'newton3',
      q: 'Un patinador empuja a otro. Seg√∫n la 3¬™ ley de Newton‚Ä¶',
      options: [
        'solo el m√°s fuerte ejerce fuerza.',
        'ambos ejercen fuerzas iguales y opuestas.',
        'solo el que se mueve m√°s r√°pido recibe fuerza.',
        'las fuerzas dependen de la masa pero no del contacto.'
      ],
      correct: 1,
      explain:
        'Acci√≥n y reacci√≥n: el patinador A ejerce una fuerza sobre B, y B ejerce una fuerza igual y opuesta sobre A.'
    },
    {
      topicId: 'peso',
      q: '¬øC√≥mo se calcula el peso de un cuerpo en la Tierra?',
      options: [
        'P = m ¬∑ v',
        'P = m / g',
        'P = m ¬∑ g',
        'P = g / m'
      ],
      correct: 2,
      explain: 'El peso es una fuerza: P = m ¬∑ g.'
    },
    {
      topicId: 'friccion',
      q: 'La fuerza de rozamiento‚Ä¶',
      options: [
        'siempre ayuda al movimiento.',
        'siempre es despreciable.',
        'se opone al movimiento relativo entre superficies.',
        'no depende del tipo de superficie.'
      ],
      correct: 2,
      explain:
        'La fricci√≥n se opone al movimiento relativo entre superficies en contacto.'
    },
    {
      topicId: 'coef',
      q: 'El coeficiente de rozamiento Œº‚Ä¶',
      options: [
        'depende del √°rea de contacto.',
        'depende de los materiales en contacto.',
        'es siempre 1.',
        'solo existe en l√≠quidos.'
      ],
      correct: 1,
      explain:
        'Œº depende de la naturaleza de las superficies (madera, hielo, caucho‚Ä¶), no del √°rea de contacto.'
    },
    {
      topicId: 'aceleracion',
      q: 'En ca√≠da libre cerca de la superficie terrestre, la aceleraci√≥n de un cuerpo‚Ä¶',
      options: [
        'es aproxim√°damente constante e igual a g.',
        'es cero.',
        'depende solamente de la masa.',
        'no tiene relaci√≥n con la gravedad.'
      ],
      correct: 0,
      explain:
        'En ca√≠da libre sin rozamiento apreciable, la aceleraci√≥n se considera constante: g ‚âà 9,8 m/s¬≤.'
    }
  ];

  // ===== –°–õ–û–í–ê–†–¨ =====
  const vocabList = [
    { es: 'fuerza', ru: '—Å–∏–ª–∞' },
    { es: 'masa', ru: '–º–∞—Å—Å–∞' },
    { es: 'aceleraci√≥n', ru: '—É—Å–∫–æ—Ä–µ–Ω–∏–µ' },
    { es: 'peso', ru: '–≤–µ—Å' },
    { es: 'gravedad', ru: '–≥—Ä–∞–≤–∏—Ç–∞—Ü–∏—è' },
    { es: 'rozamiento', ru: '—Ç—Ä–µ–Ω–∏–µ' },
    { es: 'fuerza neta', ru: '—Ä–∞–≤–Ω–æ–¥–µ–π—Å—Ç–≤—É—é—â–∞—è —Å–∏–ª–∞' },
    { es: 'acci√≥n y reacci√≥n', ru: '–¥–µ–π—Å—Ç–≤–∏–µ –∏ –ø—Ä–æ—Ç–∏–≤–æ–¥–µ–π—Å—Ç–≤–∏–µ' },
    { es: 'coeficiente de rozamiento', ru: '–∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Ç—Ä–µ–Ω–∏—è' }
  ];

  // ===== –†–ï–ù–î–ï–† –ö–ê–†–¢–û–ß–ï–ö –¢–ï–û–†–ò–ò =====
  const cardsContainer = document.getElementById('cardsContainer');
  const searchInput = document.getElementById('searchInput');
  let showTranslation = true;

  function renderCards(filterText = '') {
    cardsContainer.innerHTML = '';
    const text = filterText.trim().toLowerCase();

    topics.forEach(topic => {
      const combined =
        (topic.title + ' ' + topic.text_ca + ' ' + topic.text_ru + ' ' + topic.keywords.join(' '))
          .toLowerCase();
      if (text && !combined.includes(text)) return;

      const card = document.createElement('section');
      card.className = 'theory-card';
      card.dataset.topicId = topic.id;

      card.innerHTML = `
        <header class="theory-header">
          <div class="theory-title">
            <span class="icon-dot"></span>
            <span>${topic.title}</span>
          </div>
          <div class="theory-ref">${topic.ref}</div>
        </header>
        <div class="theory-text">${topic.text_ca}</div>
        <div class="translation" style="${showTranslation ? '' : 'display:none;'}">${topic.text_ru}</div>
        <div class="chip-row">
          ${topic.keywords
            .map(k => `<button class="chip" data-chip="${k.toLowerCase()}">${k}</button>`)
            .join('')}
        </div>
      `;

      cardsContainer.appendChild(card);
    });
  }

  // –ü–æ–∏—Å–∫
  searchInput.addEventListener('input', e => {
    renderCards(e.target.value);
  });

  // –ö–ª–∏–∫–∏ –ø–æ "—á–∏–ø–∞–º" ‚Äî —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å–ª–æ–≤—É
  cardsContainer.addEventListener('click', e => {
    const chip = e.target.closest('.chip');
    if (!chip) return;
    const word = chip.dataset.chip || '';
    searchInput.value = word;
    renderCards(word);
  });

  // –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –ø–µ—Ä–µ–≤–æ–¥–∞
  const toggleTranslate = document.getElementById('toggleTranslate');
  toggleTranslate.addEventListener('click', () => {
    showTranslation = !showTranslation;
    toggleTranslate.classList.toggle('on', showTranslation);
    toggleTranslate.querySelector('span').textContent =
      showTranslation ? '–ü–æ–∫–∞–∑–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥ (RU)' : '–°–∫—Ä—ã—Ç—å –ø–µ—Ä–µ–≤–æ–¥';
    document.querySelectorAll('.translation').forEach(el => {
      el.style.display = showTranslation ? 'block' : 'none';
    });
  });

  // ===== –¢–ï–°–¢–´ –ò –ü–†–û–ì–†–ï–°–° =====
  let currentTestIndex = 0;
  const testQuestion = document.getElementById('testQuestion');
  const testOptions = document.getElementById('testOptions');
  const testFeedback = document.getElementById('testFeedback');
  const progressBar = document.getElementById('progressBar');
  const progressCircle = document.getElementById('progressCircle');

  const PROGRESS_KEY = 'fisica_tema7_progress';
  let progressState = JSON.parse(localStorage.getItem(PROGRESS_KEY) || '{}');
  if (!Array.isArray(progressState.done)) progressState.done = [];

  function saveProgress() {
    localStorage.setItem(PROGRESS_KEY, JSON.stringify(progressState));
  }

  function updateProgressUI() {
    const total = tests.length;
    const done = progressState.done.length;
    const percent = Math.round((done / total) * 100);

    progressBar.style.width = percent + '%';
    progressCircle.textContent = `${done} / ${total} ¬∑ ${percent}%`;
  }

  function loadTest() {
    const t = tests[currentTestIndex];
    const topic = topics.find(tp => tp.id === t.topicId);
    testQuestion.textContent = (topic ? topic.ref + ' ¬∑ ' : '') + t.q;
    testOptions.innerHTML = '';
    testFeedback.textContent = '';

    t.options.forEach((opt, idx) => {
      const btn = document.createElement('button');
      btn.className = 'test-option';
      btn.textContent = opt;
      btn.addEventListener('click', () => {
        const already = progressState.done.includes(currentTestIndex);
        if (idx === t.correct) {
          btn.classList.add('correct');
          testFeedback.textContent = '‚úÖ –í–µ—Ä–Ω–æ: ' + t.explain;
          testFeedback.className = 'test-feedback ok';
          if (!already) {
            progressState.done.push(currentTestIndex);
            saveProgress();
            updateProgressUI();
          }
        } else {
          btn.classList.add('wrong');
          testFeedback.textContent = '‚ùå –ù–µ —Å–æ–≤—Å–µ–º: ' + t.explain;
          testFeedback.className = 'test-feedback bad';
        }

        // –ë–ª–æ–∫–∏—Ä—É–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
        Array.from(testOptions.children).forEach(b => (b.disabled = true));

        // –°–ª–µ–¥—É—é—â–∏–π —Ç–µ—Å—Ç
        setTimeout(() => {
          currentTestIndex = (currentTestIndex + 1) % tests.length;
          loadTest();
        }, 1300);
      });
      testOptions.appendChild(btn);
    });
  }

  updateProgressUI();
  loadTest();

  // ===== –ú–ò–ù–ò-–¢–†–ï–ù–ê–ñ–Å–† –°–õ–û–í =====
  const vocabWordEl = document.getElementById('vocabWord');
  const vocabAnswerEl = document.getElementById('vocabAnswer');
  const vocabFeedbackEl = document.getElementById('vocabFeedback');
  const vocabMetaEl = document.getElementById('vocabMeta');
  const btnCheckVocab = document.getElementById('checkVocab');
  const btnShowVocab = document.getElementById('showVocab');
  const btnNextVocab = document.getElementById('nextVocab');

  let currentVocabIndex = 0;
  let vocabStats = { seen: 0, correct: 0 };

  function pickRandomVocab() {
    currentVocabIndex = Math.floor(Math.random() * vocabList.length);
    const w = vocabList[currentVocabIndex];
    vocabWordEl.textContent = w.es;
    vocabAnswerEl.value = '';
    vocabFeedbackEl.textContent = '';
    vocabMetaEl.textContent = `–í—ã—É—á–µ–Ω–æ –ø—Ä–∏–º–µ—Ä–Ω–æ: ${vocabStats.correct} –≤–µ—Ä–Ω—ã—Ö –∏–∑ ${vocabStats.seen} –ø–æ–ø—ã—Ç–æ–∫.`;
    vocabAnswerEl.focus();
  }

  btnCheckVocab.addEventListener('click', () => {
    const w = vocabList[currentVocabIndex];
    const answer = vocabAnswerEl.value.trim().toLowerCase();
    vocabStats.seen++;
    if (!answer) {
      vocabFeedbackEl.textContent = '–í–≤–µ–¥–∏—Ç–µ –ø–µ—Ä–µ–≤–æ–¥ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ ¬´–ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç¬ª.';
      vocabFeedbackEl.style.color = '#ffd36a';
      return;
    }
    if (answer === w.ru.toLowerCase()) {
      vocabStats.correct++;
      vocabFeedbackEl.textContent = '‚úÖ –û—Ç–ª–∏—á–Ω–æ! –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥.';
      vocabFeedbackEl.style.color = '#38e38b';
    } else {
      vocabFeedbackEl.textContent = `‚ùå –ù–µ —Å–æ–≤—Å–µ–º. –ü—Ä–∞–≤–∏–ª—å–Ω–æ: ¬´${w.ru}¬ª.`;
      vocabFeedbackEl.style.color = '#ff5c7a';
    }
    vocabMetaEl.textContent = `–í—ã—É—á–µ–Ω–æ –ø—Ä–∏–º–µ—Ä–Ω–æ: ${vocabStats.correct} –≤–µ—Ä–Ω—ã—Ö –∏–∑ ${vocabStats.seen} –ø–æ–ø—ã—Ç–æ–∫.`;
  });

  btnShowVocab.addEventListener('click', () => {
    const w = vocabList[currentVocabIndex];
    vocabFeedbackEl.textContent = `üìñ –û—Ç–≤–µ—Ç: ¬´${w.ru}¬ª.`;
    vocabFeedbackEl.style.color = '#57d6ff';
  });

  btnNextVocab.addEventListener('click', () => {
    pickRandomVocab();
  });

  pickRandomVocab();

  // ===== –£–ß–Å–¢ –í–†–ï–ú–ï–ù–ò –ó–ê–ù–Ø–¢–ò–Ø (–ª–æ–∫–∞–ª—å–Ω–æ) =====
  const sessionTodayEl = document.getElementById('sessionToday');
  const totalMinutesEl = document.getElementById('totalMinutes');
  const SESSION_KEY = 'fisica_tema7_session';

  let sessionState = JSON.parse(localStorage.getItem(SESSION_KEY) || '{}');
  if (typeof sessionState.totalSeconds !== 'number') sessionState.totalSeconds = 0;
  if (typeof sessionState.todaySeconds !== 'number') sessionState.todaySeconds = 0;
  if (!sessionState.todayDate) sessionState.todayDate = new Date().toISOString().slice(0, 10);

  function resetIfNewDay() {
    const today = new Date().toISOString().slice(0, 10);
    if (sessionState.todayDate !== today) {
      sessionState.todayDate = today;
      sessionState.todaySeconds = 0;
    }
  }

  function formatMinutes(sec) {
    const m = Math.round(sec / 60);
    return m + ' –º–∏–Ω';
  }

  function updateTimeUI() {
    sessionTodayEl.textContent = formatMinutes(sessionState.todaySeconds);
    totalMinutesEl.textContent = formatMinutes(sessionState.totalSeconds);
  }

  resetIfNewDay();
  updateTimeUI();

  setInterval(() => {
    resetIfNewDay();
    sessionState.totalSeconds += 10;
    sessionState.todaySeconds += 10;
    localStorage.setItem(SESSION_KEY, JSON.stringify(sessionState));
    updateTimeUI();
  }, 10000);

  // ===== –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–ï –†–ï–ñ–ò–ú–ê (–¢–ï–û–†–ò–Ø / –¢–ï–°–¢–´ / –°–õ–û–í–ê) =====
  const modeTabs = document.querySelectorAll('.mode-tab');
  const testsPanel = document.getElementById('testsPanel');
  const vocabPanel = document.getElementById('vocabPanel');
  const contentArea = document.querySelector('.content-area');

  function setMode(mode) {
    modeTabs.forEach(t => t.classList.toggle('active', t.dataset.mode === mode));
    // –ü–æ —Ñ–∞–∫—Ç—É –º—ã –ø—Ä–æ—Å—Ç–æ —Å–∫—Ä–æ–ª–ª–∏–º –∏ –≤–∏–∑—É–∞–ª—å–Ω–æ –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º –Ω—É–∂–Ω—ã–π –±–ª–æ–∫,
    // –Ω–æ –≤—Å—ë –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–∞ –æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Äî –ø—Ä–æ—â–µ –¥–ª—è —Ä–µ–±—ë–Ω–∫–∞.
    if (mode === 'theory') {
      contentArea.style.boxShadow = '0 0 0 1px rgba(87,214,255,0.35)';
      testsPanel.style.boxShadow = 'none';
      vocabPanel.style.boxShadow = 'none';
    } else if (mode === 'tests') {
      contentArea.style.boxShadow = 'none';
      testsPanel.style.boxShadow = '0 0 0 1px rgba(87,214,255,0.35)';
      vocabPanel.style.boxShadow = 'none';
      testsPanel.scrollIntoView({ behavior: 'smooth', block: 'center' });
    } else if (mode === 'vocab') {
      contentArea.style.boxShadow = 'none';
      testsPanel.style.boxShadow = 'none';
      vocabPanel.style.boxShadow = '0 0 0 1px rgba(87,214,255,0.35)';
      vocabPanel.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }
  }

  modeTabs.forEach(tab => {
    tab.addEventListener('click', () => {
      setMode(tab.dataset.mode);
    });
  });

  // –°—Ç–∞—Ä—Ç–æ–≤–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞
  renderCards('');
  setMode('theory');
</script>
</body>
</html>
